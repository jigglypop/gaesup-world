# Gaesup ì•„í‚¤í…ì²˜ ê°€ì´ë“œ

## 1. í•µì‹¬ ëª©í‘œ

1.  **ê´€ì‹¬ì‚¬ ë¶„ë¦¬ (Separation of Concerns)**: 3D ë Œë”ë§, ë¬¼ë¦¬ ê³„ì‚°, ìƒíƒœ ê´€ë¦¬ë¥¼ ëª…í™•ížˆ ë¶„ë¦¬í•˜ì—¬ ë³µìž¡ì„±ì„ ë‚®ì¶¥ë‹ˆë‹¤.
2.  **ì„±ëŠ¥ ìµœì í™”**: 60FPSë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ React ë¦¬ë Œë”ë§ì„ ìµœì†Œí™”í•˜ê³ , ë¬´ê±°ìš´ ê³„ì‚°ì€ í”„ë ˆìž„ ë£¨í”„ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
3.  **ìž¬ì‚¬ìš©ì„± ë° í™•ìž¥ì„±**: Blueprint ì‹œìŠ¤í…œì„ í†µí•´ ì—”í‹°í‹°ë¥¼ ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ì •ì˜í•˜ê³ , ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìžˆë„ë¡ í•©ë‹ˆë‹¤.

## 2. í•µì‹¬ ì•„í‚¤í…ì²˜ íŒ¨í„´: ë‹¨ë°©í–¥ ë°ì´í„° íë¦„

ë³¸ í”„ë¡œì íŠ¸ëŠ” `ref`ì˜ ì„¸ê³„ì™€ `Zustand`ì˜ ì„¸ê³„ë¥¼ ì—„ê²©ížˆ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ **ë‹¨ë°©í–¥ ë°ì´í„° íë¦„**ê³¼ **ìŠ¤ëƒ…ìƒ· íŒ¨í„´**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

-   **`ref`ì˜ ì„¸ê³„ (Layer 1)**: `useFrame` ë£¨í”„ ë‚´ì—ì„œ ë§¤ í”„ë ˆìž„ ë³€í™”í•˜ëŠ” ì‹¤ì‹œê°„ ë°ì´í„° (e.g., `THREE.Object3D`, `Rapier.RigidBody`). React ë Œë”ë§ê³¼ ë¬´ê´€í•˜ê²Œ ë™ìž‘í•©ë‹ˆë‹¤.
-   **`Zustand`ì˜ ì„¸ê³„ (Layer 2)**: React ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì„ ìœ ë°œí•˜ëŠ” ìƒíƒœ ë°ì´í„°. ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë©°, UI í‘œì‹œì— í•„ìš”í•œ ìµœì†Œí•œì˜ ë°ì´í„°ë§Œ ì €ìž¥í•©ë‹ˆë‹¤.

### ë°ì´í„° íë¦„

```
Layer 3 (UI)        Layer 2 (Hooks/Zustand)       Bridge        Layer 1 (Rapier/Three.js ref)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(Click) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> | handleJump()          |
                    |                       |
                    | bridge.execute(JUMP)â”€â”€+â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> | ref.applyImpulse()          |
                                                                |                             |
(useFrame) ~~~~~~~> | const snap =          |                    |                             |
                    | bridge.snapshot() <â”€â”€â”€+â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ | ref.translation()           |
                    |                       |                    |                             |
                    | zustand.set(snap)     |                    |                             |
                    |                       |                    |                             |
(UI Update) <â”€â”€â”€â”€â”€â”€â”€+â”€â”€(subscribe to store) |                    |                             |
```

1.  **ëª…ë ¹ (Command)**: UI ì´ë²¤íŠ¸(ìž…ë ¥ ë“±)ëŠ” `Hook`ì„ í†µí•´ `Bridge`ì— **ëª…ë ¹ ê°ì²´**ë¥¼ ì „ë‹¬í•˜ì—¬ Layer 1ì˜ `ref`ë¥¼ ì¡°ìž‘í•©ë‹ˆë‹¤. (Layer 2 â†’ 1)
2.  **ìŠ¤ëƒ…ìƒ· (Snapshot)**: `useFrame` ë£¨í”„ì—ì„œ `Hook`ì€ `Bridge`ë¥¼ í†µí•´ Layer 1 `ref`ì˜ í˜„ìž¬ ìƒíƒœë¥¼ **ì½ê¸° ì „ìš© ìŠ¤ëƒ…ìƒ·**ìœ¼ë¡œ ê°€ì ¸ì™€ `Zustand` ìŠ¤í† ì–´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. (Layer 1 â†’ 2)

ì´ êµ¬ì¡°ë¥¼ í†µí•´ `ref`ì™€ `Zustand`ëŠ” ì ˆëŒ€ ì§ì ‘ í†µì‹ í•˜ì§€ ì•Šìœ¼ë©°, `Zustand` ìŠ¤í† ì–´ëŠ” ë§¤ í”„ë ˆìž„ì´ ì•„ë‹Œ, UIì— í‘œì‹œë  í•„ìš”ê°€ ìžˆì„ ë•Œë§Œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.

## 3. ë ˆì´ì–´ ì •ì˜

### **Layer 1: Core Layer (ìˆœìˆ˜ ë¡œì§)**

-   **ì—­í• **: ë¬¼ë¦¬ ê³„ì‚°, 3D ê°ì²´ ì¡°ìž‘, ë„¤íŠ¸ì›Œí¬ í†µì‹  ë“± Reactì™€ ë¬´ê´€í•œ ëª¨ë“  í•µì‹¬ ë¡œì§.
-   **êµ¬ì„± ìš”ì†Œ**: `core/`, `behavior/`
-   **í—ˆìš©**: ìˆœìˆ˜ TS/JS í´ëž˜ìŠ¤, `THREE.js`, `Rapier`, `WebSocket`, `ref` ì¡°ìž‘, `useFrame` ë¡œì§.
-   **ê¸ˆì§€**: **React Hooks, Zustand Store ì§ì ‘ ì ‘ê·¼, React ì»´í¬ë„ŒíŠ¸ import.**

### **Layer 2: State Management Layer (ìƒíƒœ ê´€ë¦¬)**

-   **ì—­í• **: ìƒíƒœ ê´€ë¦¬ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§. Layer 1ê³¼ Layer 3ë¥¼ ì¤‘ìž¬.
-   **êµ¬ì„± ìš”ì†Œ**: `controllers/`, `stores/`, `hooks/`
-   **í—ˆìš©**: React Hooks, Zustand Store, `useRef`ë¡œ Layer 1 ê°ì²´ ê´€ë¦¬, `Bridge`ë¥¼ í†µí•œ í†µì‹ .
-   **ê¸ˆì§€**: `useFrame` ë‚´ë¶€ì—ì„œ ì§ì ‘ `setState` í˜¸ì¶œ (ëŒ€ì‹  ìŠ¤ëƒ…ìƒ· ë¹„êµ í›„ í•„ìš”ì‹œ ì—…ë°ì´íŠ¸).

### **Layer 3: Integration Layer (UI)**

-   **ì—­í• **: UI ë Œë”ë§ ë° ì‚¬ìš©ìž ì´ë²¤íŠ¸ ì²˜ë¦¬.
-   **êµ¬ì„± ìš”ì†Œ**: `components/`
-   **í—ˆìš©**: ëª¨ë“  React íŒ¨í„´, UI ì»´í¬ë„ŒíŠ¸, ì‚¬ìš©ìž ì´ë²¤íŠ¸ ì²˜ë¦¬.
-   **ì£¼ì˜**: ì„±ëŠ¥ì— ë¯¼ê°í•œ ë¡œì§ì€ ë°˜ë“œì‹œ í•˜ìœ„ ë ˆì´ì–´ë¡œ ìœ„ìž„.

## 4. ìµœìƒìœ„ í´ë” êµ¬ì¡°

```
src/
â”œâ”€â”€ blueprints/              # ðŸ›ï¸ Blueprint Layer: ë„ë©”ì¸ ë…ë¦½ì ì¸ ìˆœìˆ˜ ë°ì´í„°
â”‚   â”œâ”€â”€ characters/
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ core/                    # â¤ï¸ Domain Layer: ê° ë„ë©”ì¸ì˜ í•µì‹¬ ë¡œì§
â”‚   â”œâ”€â”€ motions/
â”‚   â”œâ”€â”€ animation/
â”‚   â”œâ”€â”€ networks/
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ admin/
â”œâ”€â”€ legacy/
â””â”€â”€ utils/
```

-   **`blueprints/`**: ìºë¦­í„° ìŠ¤íƒ¯, ì• ë‹ˆë©”ì´ì…˜ ëª©ë¡ ë“± ê²Œìž„ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ì •ì˜í•˜ëŠ” ìˆœìˆ˜ TS ê°ì²´.
-   **`core/`**: ê° ë„ë©”ì¸(ëª¨ì…˜, ì• ë‹ˆë©”ì´ì…˜, ë„¤íŠ¸ì›Œí¬ ë“±)ì´ `blueprints`ì˜ ë°ì´í„°ë¥¼ "ì†Œë¹„"í•˜ì—¬ ì‹¤ì œ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” ê³³.

(ìƒì„¸í•œ ê°€ì´ë“œëŠ” `BLUEPRINT_GUIDE.md`, `BRIDGE_GUIDE.md`, `HOOK_GUIDE.md` ì°¸ì¡°)
